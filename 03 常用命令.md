# Linux常用命令

- ls：list，列出当前目录下的内容，类似dos的dir，`.`表示当前目录，`..`表示上一级目录，`.文件名`表示隐藏文件

|        命令         |                             作用                             |
| :-----------------: | :----------------------------------------------------------: |
|       `ls -a`       |          all显示当前目录下的所有内容，包括隐藏文件           |
|       `ls -l`       |       list以列表形式显示当前目录下的所有内容及详细信息       |
|       `ls -h`       | human人性化显示当前目录下所有内容，显示更友好，一般与其他选项联用 |
|       `ls -R`       |                      递归显示子目录信息                      |
|       `ls -d`       |                          只显示目录                          |
|      `ls -ld`       |                      显示目录的详细信息                      |
|        `l. `        |                        只显示隐藏文件                        |
|       `ls *`        |           通配符`*`，匹配任意个字符，查找所有内容            |
|     `ls ?.txt`      |     ?匹配任意一个字符，匹配文件名是任意一个字符的txt文件     |
| `ls [m,n]/[mn].txt` |                 匹配文件名是m或者n的txt文件                  |
|   `ls [m-n].txt`    |            匹配文件名是m-n中任意一个字符的txt文件            |
|     `ls \*.txt`     |               `\`表示转义，匹配任意一个txt文件               |

**ls -l：**详细信息包括是否是文件夹，root用户，普通用户，群组用户的权限，文件所属的组，文件大小

(单位字节)，修改日期，文件名等

第一列的十个字母：
第一个字母d/-/c/b/l，d表示目录，-表示文件，c表示字符文件，b表示block文件，l表示链接文件；
后九个三个分为一组，分别表示user，group，other的权限。其中，w表示可写，r表示可读（可访问），x表示可执行

- clear：清屏
  也可用`ctrl+l`
- cd：change direction ，切换到目录下


|   命令   |                 作用                  |
| :------: | :-----------------------------------: |
| cd /cd ~ | 切换到当前用户的家目录下（/home/usr） |
|   cd .   |           保持在当前目录下            |
|  cd ..   |          切换到上一级目录下           |
|   cd -   |        切换到上一次所在的目录         |

- pwd：print work direction，打印当前所在的目录（工作目录）

打印原文件的路径，非链接文件

```shel
pwd -P
```

- mkdir：make direction，创建新目录

|        命令        |                     作用                      |
| :----------------: | :-------------------------------------------: |
|      mkdir a       |                   创建目录a                   |
|  mkdir -p a/b/c/d  |              迭代创建a/b/c/d目录              |
| mkdir a/{1,2,3}dir |    在a目录下同时创建1dir,2dir,3dir三个目录    |
|   mkdir -m 711 a   | 创建a目录，权限为711，不使用默认权限（umask） |

- rmdir ：remove direction，删除空目录
- touch：创建新文件或者更新文件时间
- rm：remove，删除文件

| 命令  |            作用            |
| :---: | :------------------------: |
| rm -i | 交互式删除，删除文件有提示 |
| rm -f | 强制删除，忽略不存在的文件 |
| rm -r |     递归删除，删除目录     |

- cp：copy，复制文件

| 命令  |               作用               |
| :---: | :------------------------------: |
| cp -a |        保持文件原有的属性        |
| cp -f |    复制文件已存在时，直接覆盖    |
| cp -i | 交互式复制，提醒是否覆盖已有文件 |
| cp -r |      递归复制，复制整个目录      |
| cp -v |           显示复制进度           |

复制多个文件

```shell
cp {a,b} /opt/test
```

- mv：move，移动或者重命名

| 命令  |               作用               |
| :---: | :------------------------------: |
| mv -f |    剪切文件已存在时，直接覆盖    |
| mv -i | 交互式剪切，提醒是否覆盖已有文件 |
| mv -v |           显示移动进度           |

把a移动到tmp下，并改名为b

```shell
mv a /tmp/b 
```

- rename：重命名

把所有的.conf文件更改为.conf.bak

```bash
rename "conf" "conf.bak" *.conf
```

- cat：查看文件，可同时查看多个文件，适合文件内容较少的情况

|  命令  |                 作用                  |
| :----: | :-----------------------------------: |
| cat -b |          对非空的输出行编号           |
| cat -n |          对输出的所有行编号           |
| cat -A | 显示文本中所有控制符（如空格，tab等） |

```shell
cat a.txt b.txt
```

- tac：以行为单位反向显示文本，cat倒过来
- rev：以列为单位反向显示文本
- more ：当显示内容过多时，分屏显示，方便查看。空格换下一页，回车下一行，q退出，h帮助，显示文本翻阅进度。只能向下翻页，不能向上翻页
- less：用法同more一致，不显示文本的翻阅进度，可上下翻页
- head：查看文件的前n行

```shell
head -n file

head -c* file # 查看文件前*个字节
```

- tail

|  命令   |                             作用                             |
| :-----: | :----------------------------------------------------------: |
| tail -n |                       查看文件的后n行                        |
| tail -f | 跟踪显示文件更新（follow），一般用于查看文件日志，可以不退出持续查看新写入的内容，文件删除不会提示，重建文件也不会继续跟踪 |
| tail -F |      同f一样，但文件删除后会有提示，重建后可以继续追踪       |

- cut：对列操作

|   命令    |        作用         |
| :-------: | :-----------------: |
|  cut -dc  | 以c为分隔符对列切分 |
| cut -fa,b |     取第a和b列      |

```bash
cat a | cut -d' ' -f1-3
```

* paste：横向合并文件

指定:为分隔符（默认tab）合并

```shell
paste -d: a b
```

- tr：删除/替换文本内容

|  命令  |         作用         |
| :----: | :------------------: |
| tr -s  |       压缩替换       |
| tr -d  |         删除         |
| tr -dc | 除了指定字符全部删除 |
| tr -c  | 除了指定字符全部替换 |

删除a中的1

```shell
tr -d 1 < a
```

把a中的空格替换为1

```shell
cat a |tr '' 1 
```

把b中的空格压缩替换（字符间有多个空格）为%

```shell
cat b |tr -s '' %
```

*没有-s参数，所有空格都会被替换为%，有-s参数，两个字符间的所有空格会被替换为一个%*

- wc：word count，对文本内容计数

```shell
wc filename
```

结果为行数，单词数，字节数，文件名

| 命令  |    作用    |
| :---: | :--------: |
| wc -l |  统计行数  |
| wc -w | 统计单词数 |
| wc -c | 统计字节数 |
| wc -m | 统计字符数 |

- sort：排序

按照ASCII码进行升序排序

```shell
sort a.txt
```

|   命令   |                           作用                           |
| :------: | :------------------------------------------------------: |
| sort -n  | 按照数字大小进行排序，含字母的部分从低位依次排列分组比较 |
| sort -r  |                         降序排列                         |
| sort -tc |                   按照c字符分割列排序                    |
| sort -kx |               按照第x列排序，一般和-t连用                |
| sort -u  |                        删除重复行                        |

- uniq：去重

|     命令      |                        作用                         |
| :-----------: | :-------------------------------------------------: |
| uniq -c a.txt | 把a.txt的**相邻两行**的重复项查找出来并显示重复个数 |
|    uniq -d    |                    只显示重复的                     |
|    uniq -u    |                   只显示不重复的                    |

若要对整个文件进行去重

```shell
sort a.txt | uniq 
#sort -u a.txt
```

- find：遍历指定路径查找文件，搜索速度慢

|              命令              |                   作用                    |
| :----------------------------: | :---------------------------------------: |
|      find ./ -name a.txt       |       查找当前目录下名为a.txt的文件       |
|     find ./ -name "* .txt"     |     查找当前目录下所有后缀为txt的文件     |
|       find / -iname "b*"       | 查找根目录下所有以b开头的文件，忽略大小写 |
|       find /temp -size 1       |       查找temp目录下大小为1k的文件        |
| find /temp -size +1k -size -2M |     查找temp目录下大于1k小于2M的文件      |
|       find ./ -perm 777        |  查找当前目录下权限为777的所有文件或目录  |
|       find ./ -user jack       |     查找当前目录下属于Jack用户的文件      |
|         find / -type f         |         查找根目录下的二进制文件          |
|         find / -type l         |         查找根目录下的软链接文件          |
|         find / -type d         |            查找根目录下的目录             |
|         find / -type c         |          查找根目录下的字符文件           |

find命令中文件是以block为单位的，一个block等于512B，1k=2block

find也可使用一些逻辑条件做组合查找

|  符号  | 含义 |
| :----: | :--: |
|   -a   |  与  |
|   -o   |  或  |
| -not/! |  非  |

```shell
find /data -name '*.sh' -o -name '*.txt'

find /data ! \(-user root -a -name '*.sh'\)
```

* locate：文件查找，locate是预先在数据库查找索引得到的，新建文件是搜不到的，但搜索速度快

```shell
locate 文件名

locate -i #忽略大小写
```

- gzip和bzip2：文件压缩解压。gzip将tar打包文件压缩，也可对压缩文件解压缩，两个命令一般一起使用，压缩包文件后缀为.tar.gz

  bzip2用法和gzip一样，只是文件后缀名为.tar.bz2

|   命令    | 作用 |
| :-------: | :--: |
|  gzip -d  | 解压 |
| gzip [-r] | 压缩 |

- zip和unzip

|          命令          |        作用        |
| :--------------------: | :----------------: |
| zip [-r] filename file | 压缩file为filename |
|        unzip -d        |       解压缩       |

* tar：打包，解包文件

|             命令             |                    作用                    |
| :--------------------------: | :----------------------------------------: |
|            tar -c            |                创建打包文件                |
|            tar -v            |             显示打包/解包进度              |
|            tar -f            | 指定文件名，后接.tar文件，一定放在选项最后 |
|            tar -t            |        列出打包的档案文件包含的文件        |
|            tar -x            |                    解包                    |
|          tar -zcvf           |       打包压缩文件,文件名后缀.tar.gz       |
|          tar -zxvf           |      解包解压缩文件,文件名后缀.tar.gz      |
| tar -zxvf xxx.tar.gz -C path |          解压缩xxx.tar.gz到path下          |
|          tar -jcvf           |      打包压缩文件,文件名后缀.tar.bz2       |
|          tar -jxvf           |     解包解压缩文件,文件名后缀.tar.bz2      |

把当前目录下的a.txt和b.txt文件打包为test.tar文件

```shell
tar -cvf test.tar a.txt b.txt
```

 解包test.tar文件

```shell
tar -xvf test.tar
```

把当前目录下的a.txt和b.txt文件打包并压缩为test.tar.gz文件

```shell
tar -zcvf test.tar.gz a.txt b.txt
```

 解包解压缩test.tar.gz文件

```shell
tar -zxvf test.tar.gz
```

* screen：共享屏幕/防止网络中断影响命令运行

创建

```shell
screen -S name
```

加入

 ```shell
screen -x name
 ```

恢复

```shell
screen -r name
```



